experiment:
  dataset: "ag_news"  # or "yelp_polarity"
  num_samples: 500
  embedding_model: "all-MiniLM-L6-v2"
  lambda: 0.1  # Hyperparameter for graph score
  openrouter_api_key_env: "OPENROUTER_API_KEY"

steps:
  - name: "extract"
    description: "要点抽出"
    agents:
      - id: "E1-A"
        model: "openai/gpt-oss-120b"
        prompt: |
          Extract 3-5 key points from the text below in bullet points. Focus on minimizing redundancy while ensuring no critical information is lost.

          Text: {input}
      - id: "E1-B"
        model: "openai/gpt-oss-120b"
        prompt: |
          Extract the top 3 key points from the text below in concise bullet points.

          Text: {input}
      - id: "E1-C"
        model: "openai/gpt-oss-120b"
        prompt: |
          Extract 3-5 key points from the text below that include keywords relevant to classification. Present as bullet points.

          Text: {input}

  - name: "summarize"
    description: "要約生成"
    agents:
      - id: "E2-A"
        model: "openai/gpt-oss-120b"
        prompt: |
          Based on the key points below, create a natural and smooth summary in 1-3 sentences suitable for human reading.

          Key points: {input}
      - id: "E2-B"
        model: "openai/gpt-oss-120b"
        prompt: |
          Based on the key points below, create a very short but keyword-dense summary in exactly 1 sentence.

          Key points: {input}
      - id: "E2-C"
        model: "openai/gpt-oss-120b"
        prompt: |
          Based on the key points below, create a summary in the following template format: "This text is about [TOPIC] because ..."

          Key points: {input}

  - name: "classify"
    description: "分類"
    agents:
      - id: "E3-A"
        model: "openai/gpt-oss-120b"
        prompt: |
          Based on the summary below, classify the text's category. Provide your reasoning process and the final label.

          Summary: {input}

          Categories: {categories}
      - id: "E3-B"
        model: "openai/gpt-oss-120b"
        prompt: |
          Based on the summary below, classify the text's category. Output in JSON format with "label" and "confidence" fields.

          Summary: {input}

          Categories: {categories}
      - id: "E3-C"
        model: "openai/gpt-oss-120b"
        prompt: |
          Based on the summary below (which may be bullet points or templated), classify the text's category. Provide the label directly.

          Summary: {input}

          Categories: {categories}